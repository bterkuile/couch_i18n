- if params[:offset].present?
  - title params[:offset]
- else
  - title t("couch_i18n.translation.index title")
.destroy-link
  = link_to t('couch_i18n.translation.destroy offset link'), couch_i18n.destroy_offset_translations_path(:offset => params[:offset]), :method => :delete, :confirm => (defined?(:are_you_sure) ? are_you_sure : t('couch_i18n.translation.are you sure'))
.import-form
  = form_tag({:action => :import}, :multipart => true) do
    = file_field_tag :importfile
    = submit_tag I18n.t('couch_i18n.translation.import')
.export-form
  = form_tag :action => :export do
    = hidden_field_tag :offset, params[:offset]
    = select_tag :exportformat, options_for_select(%w[yml csv json], params[:exportformat])
    = check_box_tag :untranslated
    = label_tag :untranslated, t('couch_i18n.translation.export.untranslated')
    = submit_tag I18n.t('couch_i18n.translation.export.execute')
.offset-navigation-block.block
  .offset-navigation-higher
    - for offset in @available_higher_offsets
      = link_to offset[:name], :offset => offset[:offset]
  .offset-navigation-form
    = form_tag({}, :method => :get )do
      - if params[:offset].present?
        = link_to I18n.t('couch_i18n.translation.go to zero offset'), :offset => nil
      = text_field_tag :offset, params[:offset], :size => 60
      = "(#{@translations.total_entries})"
      = submit_tag I18n.t('couch_i18n.translation.go to offset')
  .offset-navigation-deeper
    - for offset in @available_deeper_offsets
      = link_to offset[:name], :offset => offset[:offset]
- if @translations.any?
  = paginate @translations, :right => 3, :left => 3
  %table.index-table
    %thead
      %tr
        %th= CouchI18n::Translation.human_attribute_name(:key)
        %th= CouchI18n::Translation.human_attribute_name(:value)
        %th= CouchI18n::Translation.human_attribute_name(:translated)
        %th.action.edit
        %th.action.destroy
    %tbody
      - @translations.each do |translation|
        %tr{:class => cycle('odd', 'even')}
          %td= link_to translation.key[(params[:offset].try(:size) || 0)..-1].sub(/^\./, ''), couch_i18n.edit_translation_path(translation)
          %td= link_to translation.value, couch_i18n.edit_translation_path(translation)
          %td.boolean= boolean_show(translation.translated)
          %td.action.edit= link_to link_to_edit_content(translation), couch_i18n.edit_translation_path(translation)
          %td.action.destroy= link_to link_to_destroy_content(translation),couch_i18n.translation_path(translation), :confirm => are_you_sure, :method => :delete
- else
  %h3= t("translation.none found")

- content_for :page_links do
  = link_to link_to_new_content(:translation), couch_i18n.new_translation_path(:offset => params[:offset])
